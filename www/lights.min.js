function m(){return"http://"+this.j+"/api/"+this.o+"/lights/"+this.l}function n(){return this.h()+"/state"}function p(a){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var b=JSON.parse(this.responseText);console.log(b[0])}};c.open("PUT",n(),!0);c.send("string"===typeof a?a:JSON.stringify(a))}function q(a){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var b=JSON.parse(this.responseText);console.log(b.state);"function"===typeof a&&(b.state.a||console.log("Light will respond to changes once turned on."),a(b.state))}};c.open("GET",m());c.send()}function r(){q(function(a){p({a:!a.a})})}document.addEventListener("DOMContentLoaded",function(){var a=document.getElementById("toggle"),c=document.getElementById("colour");a&&a.addEventListener("click",r);c&&c.addEventListener("change",function(){var b,a=c.value;"string"===typeof a&&(a=parseInt(a.replace(/^#/,""),16));var g;b=((a&16711680)>>16)/255;g=((a&65280)>>8)/255;var a=((a&255)>>0)/255,h,k,d,e,l,f=Math.max(b,g,a);d=f-Math.min(b,g,a);0===d?e=l=0:(l=d/f,h=(f-b)/6/d+.5,k=(f-g)/6/d+.5,d=(f-a)/6/d+.5,b===f?e=d-k:g===f?e=1/3+h-d:a===f&&(e=2/3+k-h),0>e?e+=1:1<e&&--e);b={b:e,c:l,f:f};console.log(b);p({i:65535*b.b|0,m:255*b.c|0,g:255*b.f|0})})});
